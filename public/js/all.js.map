{"version":3,"sources":["jquery.clearable.js","invoice_detail.js","invoice_list.js","app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["/**\n * jquery.clearable.js\n *\n * Adapted from http://stackoverflow.com/questions/6258521/clear-icon-inside-input-text\n * Requires the following CSS:\n .clearable {\n        background: #fff url(data:image/gif;base64,R0lGODlhBwAHAIAAAP///5KSkiH5BAAAAAAALAAAAAAHAAcAAAIMTICmsGrIXnLxuDMLADs=) no-repeat right -10px center;\n        border: 1px solid #999;\n        padding: 3px 24px 3px 4px; // Second value must match settings.offset\n        border-radius: 3px;\n    }\n .clearable.x  { background-position: right 10px center; }\n .clearable.onX{ cursor: pointer; }\n .clearable::-ms-clear {display: none; width:0; height:0;}\n\n */\n\n(function ($) {\n    $.fn.clearable = function (options) {\n        var settings = $.extend({\n            animate: false,\n            offset: 24, // Pixels of offset from right end of input\n            // Optional callbacks\n            onInput: function() {},\n            onClear: function() {}\n        }, options);\n\n        // Add class to target if not present\n        this.addClass('clearable');\n        // Events\n        this.on('input', function (evt) {\n            if (settings.animate) {\n                $(this).css({ transition: 'background 0.4s' })\n            }\n            $(this)[_toggle(this.value)]('x');\n            settings.onInput($(this));\n        }).on('mousemove', function(evt){\n            $(this)[_toggle(_isOnX(evt))]('onX');\n        }).on('touchstart click', function(evt){\n            evt.preventDefault();\n            if (_isOnX(evt)) {\n                settings.onClear($(this));\n                $(this).removeClass('x onX').val('').change();\n            }\n        });\n\n        // Determine whether user's mouse is over the 'X'\n        function _isOnX(evt) {\n            return (evt.target.offsetWidth - settings.offset) < (evt.clientX - evt.target.getBoundingClientRect().left);\n        }\n\n        // Add or remove classes based on value\n        function _toggle(value) {\n            return value ? 'addClass' : 'removeClass';\n        }\n\n        return this;\n    };\n\n\n}(jQuery));","/* Support for Invoice Detail page */\n\nvar InvoiceDetail = {\n    clientSelectList: null,\n    clientModal: null,\n    invoiceId: 0,\n    dateItem: null,\n    updateUrl: '',\n    selectedClientId: null,\n    init: function (options) {\n        $.extend(this, options);\n\n        this.clientModal = $('#client_selector');\n        this.initClientTable();\n        // Auto-display the client modal if this is a new invoice\n        if (this.invoiceId == 0) {\n            this.initClientModal();\n        }\n        this.setEvents();\n    },\n    initClientTable: function() {\n        var self = this;\n        this.clientSelectList = $('#select_client_list').DataTable({\n            iDisplayLength: 10, // Default to this number per page\n            aaSorting: [],\n            fnDrawCallback: function() {\n                self.selectClientEvent();\n                // Hide pagination buttons of only one page is showing\n                var $paginates = $('.dataTables_paginate').find('.paginate_button');\n                $('.dataTables_paginate').toggle($paginates.length > 3);\n            },\n            initComplete: function () {\n                var $search = $($(this).selector + '_filter').find('input[type=\"search\"]');\n                // Add 'clearable' x to search field, and callback to restore table on clear\n                $search.addClass('clearable').clearable({\n                    onClear: function() {\n                        // Refresh table\n                        self.clientSelectList.search( '' ).columns().search( '' ).draw();\n                    }\n                });\n                $('#select_client_list_length').hide();\n            }\n        });\n    },\n    initClientModal: function() {\n        var self = this;\n        this.clientModal.modal().on('hidden.bs.modal', function () {\n            if (self.selectedClientId != null) {\n                self.retrieveClient();\n            }\n        });\n    },\n    hideDates: function() {\n        var self = this;\n        $('[data-datetype]').each(function() {\n            if (this != self.dateItem) {\n                $(this).find('div').show();\n                $(this).find('input').hide();\n            }\n        });\n\n    },\n    hydrateClient: function(data) {\n        for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n                var value = (data[key] != null) ? data[key] : '';\n                var $field = $('#' + key);\n                $field.hide();\n                if (value.length != 0) {\n                    $field.html(value)\n                        .removeClass('hidden')\n                        .show();\n                }\n            }\n        }\n    },\n    retrieveClient: function() {\n        var self = this;\n        if (this.selectedClientId != null) {\n            $.ajax({\n                type: \"GET\",\n                url: appSpace.baseUrl + '/invoice/set_client/' + appSpace.invoiceId + '/' + this.selectedClientId,\n                dataType: 'json',\n                success: function (response) {\n                    if (response.client_info) {\n                        self.hydrateClient(response.client_info);\n                    }\n                    // If this is a new invoice, reload\n                    if (response.invoice_id) {\n                        document.location = self.updateUrl +  response.invoice_id;\n                    }\n                },\n                error: function (response) {\n                    var foo = 'bar';\n                }\n            })\n        }\n    },\n    saveData: function() {\n        $.ajax({\n            type: \"GET\",\n            url: this.updateUrl,\n            data: $('form[name=details_form]').serialize(),\n            dataType: 'json',\n            success: function (response) {\n                var foo = 'bar';\n            },\n            error: function (response) {\n                var foo = 'bar';\n            }\n        })\n    },\n    setEvents: function() {\n        var self = this;\n        this.selectClientEvent();\n\n        $('#edit_client').on('click', function() {\n            self.initClientModal();\n        });\n\n        $('[data-datetype]').on('click', function() {\n            var $dateItem = $(this).find('div');\n            var $dateInput = $(this).find('input');\n            var isVisible = $dateInput.is(':visible');\n            // Hide dates except for the current one\n            self.dateItem = this;\n            self.hideDates();\n            // Toggle visibility of just this date item\n            $dateItem.toggle(isVisible);\n            $dateInput.toggle(!isVisible);\n            $dateInput.datepicker({\n                format: 'm/d/yyyy'\n            })\n                .on('changeDate', function () {\n                    // Write the value from the input to the div\n                    var $dateItem = $(this).prev('div');\n                    var $dateInput = $(this);\n                    $dateItem.html($dateInput.val())\n                        .show();\n                    $dateInput.hide();\n                    $(this).datepicker('hide');\n                    appSpace.invoiceDetail.saveData();\n                })\n                .focus();\n            if (!isVisible) {\n                $dateInput.attr('readonly', 'readonly');\n            } else {\n                $dateInput.attr('readonly', 'readonly');\n            }\n        });\n        $('[data-datetype] input').on('click keyup keydown', function(evt) {\n            evt.preventDefault();\n            return false;\n        });\n    },\n    selectClientEvent: function() {\n        var self = this;\n        $('.client_row').on('click', function () {\n            $('.client_row').removeClass('selected');\n            self.selectedClientId = $(this).attr('data-id');\n            $(this).addClass('selected');\n            $('.btn-primary').attr('data-dismiss','modal');\n        });\n    },\n};\n\n$(document).ready(function ($) {\n    if ($('#select_client_list').is('*')) {\n        appSpace.invoiceDetail = Object.create(InvoiceDetail);\n        appSpace.invoiceDetail.init({\n            invoiceId: appSpace.invoiceId,\n            updateUrl: appSpace.baseUrl + '/invoice/update/'\n        });\n    }\n});\n","/* Support for Invoice list page */\n$(document).ready(function ($) {\n    if ($('.invoice-list').is('*')) {\n        $('.invoice-list tbody tr').on('click', function () {\n            var id = $(this).attr('data-id');\n            document.location = appSpace.baseUrl + '/invoice/details/' + id;\n        });\n\n        var mainInvoiceList = $('#main_invoice_list').DataTable({\n            lengthMenu: [[10, 25, 50, -1], [10, 25, 50, \"All\"]], // Number of entries to show\n            iDisplayLength: 25, // Default to this number per page\n            aaSorting: [],\n            fnDrawCallback: function() {\n                // Hide pagination buttons of only one page is showing\n                var $paginates = $('.dataTables_paginate').find('.paginate_button');\n                $('.dataTables_paginate').toggle($paginates.length > 3);\n            },\n            initComplete: function () {\n                var $search = $($(this).selector + '_filter').find('input[type=\"search\"]');\n                // Add 'clearable' x to search field, and callback to restore table on clear\n                $search.addClass('clearable').clearable({\n                    onClear: function() {\n                        // Refresh table\n                        mainInvoiceList.search( '' ).columns().search( '' ).draw();\n                    }\n                });\n\n            }\n        });\n    }\n});\n","/*\n* app.js\n*\n* Custom Javascript code used throughout the application\n*\n*/\n"]}